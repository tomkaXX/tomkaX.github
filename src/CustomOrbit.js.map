{"version":3,"sources":["../../src/CustomOrbit.js"],"names":[],"mappings":"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","file":"CustomOrbit.js","sourcesContent":["/**\n * @author qiao / https://github.com/qiao\n * @author mrdoob / http://mrdoob.com\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author erich666 / http://erichaines.com\n */\n\n// This set of controls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n//\n//    Orbit - left mouse / touch: one finger move\n//    Zoom - middle mouse, or mousewheel / touch: two finger spread or squish\n//    Pan - right mouse, or arrow keys / touch: three finter swipe\n\nexport default CustomOrbitControl = function ( object, domElement ) {\n\n  this.object = object;\n\n  this.domElement = ( domElement !== undefined ) ? domElement : document;\n\n  // Set to false to disable this control\n  this.enabled = true;\n\n  // \"target\" sets the location of focus, where the object orbits around\n  this.target = new THREE.Vector3();\n\n  // How far you can dolly in and out ( PerspectiveCamera only )\n  this.minDistance = 0;\n  this.maxDistance = Infinity;\n\n  // How far you can zoom in and out ( OrthographicCamera only )\n  this.minZoom = 0;\n  this.maxZoom = Infinity;\n\n  // How far you can orbit vertically, upper and lower limits.\n  // Range is 0 to Math.PI radians.\n  this.minPolarAngle = 0; // radians\n  this.maxPolarAngle = Math.PI; // radians\n\n  // How far you can orbit horizontally, upper and lower limits.\n  // If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].\n  this.minAzimuthAngle = - Infinity; // radians\n  this.maxAzimuthAngle = Infinity; // radians\n\n  // Set to true to enable damping (inertia)\n  // If damping is enabled, you must call controls.update() in your animation loop\n  this.enableDamping = false;\n  this.dampingFactor = 0.25;\n\n  // This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\n  // Set to false to disable zooming\n  this.enableZoom = true;\n  this.zoomSpeed = 1.0;\n\n  // Set to false to disable rotating\n  this.enableRotate = true;\n  this.rotateSpeed = 1.0;\n\n  // Set to false to disable panning\n  this.enablePan = true;\n  this.keyPanSpeed = 7.0; // pixels moved per arrow key push\n\n  // Set to true to automatically rotate around the target\n  // If auto-rotate is enabled, you must call controls.update() in your animation loop\n  this.autoRotate = false;\n  this.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\n\n  // Set to false to disable use of the keys\n  this.enableKeys = true;\n\n  // The four arrow keys\n  this.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 };\n\n  // Mouse buttons\n  this.mouseButtons = { ORBIT: THREE.MOUSE.LEFT, ZOOM: THREE.MOUSE.MIDDLE, PAN: THREE.MOUSE.RIGHT };\n\n  // for reset\n  this.target0 = this.target.clone();\n  this.position0 = this.object.position.clone();\n  this.zoom0 = this.object.zoom;\n\n  //\n  // public methods\n  //\n\n  this.getPolarAngle = function () {\n\n    return phi;\n\n  };\n\n  this.getAzimuthalAngle = function () {\n\n    return theta;\n\n  };\n\n  this.reset = function () {\n\n    scope.target.copy( scope.target0 );\n    scope.object.position.copy( scope.position0 );\n    scope.object.zoom = scope.zoom0;\n\n    scope.object.updateProjectionMatrix();\n    scope.dispatchEvent( changeEvent );\n\n    scope.update();\n\n    state = STATE.NONE;\n\n  };\n\n  // this method is exposed, but perhaps it would be better if we can make it private...\n  this.update = function() {\n\n    var offset = new THREE.Vector3();\n\n    // so camera.up is the orbit axis\n    var quat = new THREE.Quaternion().setFromUnitVectors( object.up, new THREE.Vector3( 0, 1, 0 ) );\n    var quatInverse = quat.clone().inverse();\n\n    var lastPosition = new THREE.Vector3();\n    var lastQuaternion = new THREE.Quaternion();\n\n    return function () {\n\n      var position = scope.object.position;\n\n      offset.copy( position ).sub( scope.target );\n\n      // rotate offset to \"y-axis-is-up\" space\n      offset.applyQuaternion( quat );\n\n      // angle from z-axis around y-axis\n      spherical.setFromVector3( offset );\n\n      if ( scope.autoRotate && state === STATE.NONE ) {\n\n        rotateLeft( getAutoRotationAngle() );\n\n      }\n\n      spherical.theta += sphericalDelta.theta;\n      spherical.phi += sphericalDelta.phi;\n\n      // restrict theta to be between desired limits\n      spherical.theta = Math.max( scope.minAzimuthAngle, Math.min( scope.maxAzimuthAngle, spherical.theta ) );\n\n      // restrict phi to be between desired limits\n      spherical.phi = Math.max( scope.minPolarAngle, Math.min( scope.maxPolarAngle, spherical.phi ) );\n\n      spherical.makeSafe();\n\n\n      spherical.radius *= scale;\n\n      // restrict radius to be between desired limits\n      spherical.radius = Math.max( scope.minDistance, Math.min( scope.maxDistance, spherical.radius ) );\n\n      // move target to panned location\n      scope.target.add( panOffset );\n\n      offset.setFromSpherical( spherical );\n\n      // rotate offset back to \"camera-up-vector-is-up\" space\n      offset.applyQuaternion( quatInverse );\n\n      position.copy( scope.target ).add( offset );\n\n      scope.object.lookAt( scope.target );\n\n      if ( scope.enableDamping === true ) {\n\n        sphericalDelta.theta *= ( 1 - scope.dampingFactor );\n        sphericalDelta.phi *= ( 1 - scope.dampingFactor );\n\n      } else {\n\n        sphericalDelta.set( 0, 0, 0 );\n\n      }\n\n      scale = 1;\n      panOffset.set( 0, 0, 0 );\n\n      // update condition is:\n      // min(camera displacement, camera rotation in radians)^2 > EPS\n      // using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n      if ( zoomChanged ||\n        lastPosition.distanceToSquared( scope.object.position ) > EPS ||\n        8 * ( 1 - lastQuaternion.dot( scope.object.quaternion ) ) > EPS ) {\n\n        scope.dispatchEvent( changeEvent );\n\n        lastPosition.copy( scope.object.position );\n        lastQuaternion.copy( scope.object.quaternion );\n        zoomChanged = false;\n\n        return true;\n\n      }\n\n      return false;\n\n    };\n\n  }();\n\n  this.dispose = function() {\n\n    scope.domElement.removeEventListener( 'contextmenu', onContextMenu, false );\n    scope.domElement.removeEventListener( 'mousedown', onMouseDown, false );\n    scope.domElement.removeEventListener( 'mousewheel', onMouseWheel, false );\n    scope.domElement.removeEventListener( 'MozMousePixelScroll', onMouseWheel, false ); // firefox\n\n    scope.domElement.removeEventListener( 'touchstart', onTouchStart, false );\n    scope.domElement.removeEventListener( 'touchend', onTouchEnd, false );\n    scope.domElement.removeEventListener( 'touchmove', onTouchMove, false );\n\n    document.removeEventListener( 'mousemove', onMouseMove, false );\n    document.removeEventListener( 'mouseup', onMouseUp, false );\n    document.removeEventListener( 'mouseout', onMouseUp, false );\n\n    window.removeEventListener( 'keydown', onKeyDown, false );\n\n    //scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\n\n  };\n\n  //\n  // internals\n  //\n\n  var scope = this;\n\n  var changeEvent = { type: 'change' };\n  var startEvent = { type: 'start' };\n  var endEvent = { type: 'end' };\n\n  var STATE = { NONE : - 1, ROTATE : 0, DOLLY : 1, PAN : 2, TOUCH_ROTATE : 3, TOUCH_DOLLY : 4, TOUCH_PAN : 5 };\n\n  var state = STATE.NONE;\n\n  var EPS = 0.000001;\n\n  // current position in spherical coordinates\n  var spherical = new THREE.Spherical();\n  var sphericalDelta = new THREE.Spherical();\n\n  var scale = 1;\n  var panOffset = new THREE.Vector3();\n  var zoomChanged = false;\n\n  var rotateStart = new THREE.Vector2();\n  var rotateEnd = new THREE.Vector2();\n  var rotateDelta = new THREE.Vector2();\n\n  var panStart = new THREE.Vector2();\n  var panEnd = new THREE.Vector2();\n  var panDelta = new THREE.Vector2();\n\n  var dollyStart = new THREE.Vector2();\n  var dollyEnd = new THREE.Vector2();\n  var dollyDelta = new THREE.Vector2();\n\n  function getAutoRotationAngle() {\n\n    return 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\n\n  }\n\n  function getZoomScale() {\n\n    return Math.pow( 0.95, scope.zoomSpeed );\n\n  }\n\n  function rotateLeft( angle ) {\n\n    sphericalDelta.theta -= angle;\n\n  }\n\n  function rotateUp( angle ) {\n\n    sphericalDelta.phi -= angle;\n\n  }\n\n  var panLeft = function() {\n\n    var v = new THREE.Vector3();\n\n    return function panLeft( distance, objectMatrix ) {\n\n      v.setFromMatrixColumn( objectMatrix, 0 ); // get X column of objectMatrix\n      v.multiplyScalar( - distance );\n\n      panOffset.add( v );\n\n    };\n\n  }();\n\n  var panUp = function() {\n\n    var v = new THREE.Vector3();\n\n    return function panUp( distance, objectMatrix ) {\n\n      v.setFromMatrixColumn( objectMatrix, 1 ); // get Y column of objectMatrix\n      v.multiplyScalar( distance );\n\n      panOffset.add( v );\n\n    };\n\n  }();\n\n  // deltaX and deltaY are in pixels; right and down are positive\n  var pan = function() {\n\n    var offset = new THREE.Vector3();\n\n    return function( deltaX, deltaY ) {\n\n      var element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n      if ( scope.object instanceof THREE.PerspectiveCamera ) {\n\n        // perspective\n        var position = scope.object.position;\n        offset.copy( position ).sub( scope.target );\n        var targetDistance = offset.length();\n\n        // half of the fov is center to top of screen\n        targetDistance *= Math.tan( ( scope.object.fov / 2 ) * Math.PI / 180.0 );\n\n        // we actually don't use screenWidth, since perspective camera is fixed to screen height\n        panLeft( 2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix );\n        panUp( 2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix );\n\n      } else if ( scope.object instanceof THREE.OrthographicCamera ) {\n\n        // orthographic\n        panLeft( deltaX * ( scope.object.right - scope.object.left ) / scope.object.zoom / element.clientWidth, scope.object.matrix );\n        panUp( deltaY * ( scope.object.top - scope.object.bottom ) / scope.object.zoom / element.clientHeight, scope.object.matrix );\n\n      } else {\n\n        // camera neither orthographic nor perspective\n        console.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.' );\n        scope.enablePan = false;\n\n      }\n\n    };\n\n  }();\n\n  function dollyIn( dollyScale ) {\n\n    if ( scope.object instanceof THREE.PerspectiveCamera ) {\n\n      scale /= dollyScale;\n\n    } else if ( scope.object instanceof THREE.OrthographicCamera ) {\n\n      scope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom * dollyScale ) );\n      scope.object.updateProjectionMatrix();\n      zoomChanged = true;\n\n    } else {\n\n      console.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n      scope.enableZoom = false;\n\n    }\n\n  }\n\n  function dollyOut( dollyScale ) {\n\n    if ( scope.object instanceof THREE.PerspectiveCamera ) {\n\n      scale *= dollyScale;\n\n    } else if ( scope.object instanceof THREE.OrthographicCamera ) {\n\n      scope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom / dollyScale ) );\n      scope.object.updateProjectionMatrix();\n      zoomChanged = true;\n\n    } else {\n\n      console.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n      scope.enableZoom = false;\n\n    }\n\n  }\n\n  //\n  // event callbacks - update the object state\n  //\n\n  function handleMouseDownRotate( event ) {\n\n    //console.log( 'handleMouseDownRotate' );\n\n    rotateStart.set( event.clientX, event.clientY );\n\n  }\n\n  function handleMouseDownDolly( event ) {\n\n    //console.log( 'handleMouseDownDolly' );\n\n    dollyStart.set( event.clientX, event.clientY );\n\n  }\n\n  function handleMouseDownPan( event ) {\n\n    //console.log( 'handleMouseDownPan' );\n\n    panStart.set( event.clientX, event.clientY );\n\n  }\n\n  function handleMouseMoveRotate( event ) {\n\n    //console.log( 'handleMouseMoveRotate' );\n\n    rotateEnd.set( event.clientX, event.clientY );\n    rotateDelta.subVectors( rotateEnd, rotateStart );\n\n    var element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n    // rotating across whole screen goes 360 degrees around\n    rotateLeft( 2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed );\n\n    // rotating up and down along whole screen attempts to go 360, but limited to 180\n    rotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed );\n\n    rotateStart.copy( rotateEnd );\n\n    scope.update();\n\n  }\n\n  function handleMouseMoveDolly( event ) {\n\n    //console.log( 'handleMouseMoveDolly' );\n\n    dollyEnd.set( event.clientX, event.clientY );\n\n    dollyDelta.subVectors( dollyEnd, dollyStart );\n\n    if ( dollyDelta.y > 0 ) {\n\n      dollyIn( getZoomScale() );\n\n    } else if ( dollyDelta.y < 0 ) {\n\n      dollyOut( getZoomScale() );\n\n    }\n\n    dollyStart.copy( dollyEnd );\n\n    scope.update();\n\n  }\n\n  function handleMouseMovePan( event ) {\n\n    //console.log( 'handleMouseMovePan' );\n\n    panEnd.set( event.clientX, event.clientY );\n\n    panDelta.subVectors( panEnd, panStart );\n\n    pan( panDelta.x, panDelta.y );\n\n    panStart.copy( panEnd );\n\n    scope.update();\n\n  }\n\n  function handleMouseUp( event ) {\n\n    //console.log( 'handleMouseUp' );\n\n  }\n\n  function handleMouseWheel( event ) {\n\n    //console.log( 'handleMouseWheel' );\n\n    var delta = 0;\n\n    if ( event.wheelDelta !== undefined ) {\n\n      // WebKit / Opera / Explorer 9\n\n      delta = event.wheelDelta;\n\n    } else if ( event.detail !== undefined ) {\n\n      // Firefox\n\n      delta = - event.detail;\n\n    }\n\n    if ( delta > 0 ) {\n\n      dollyOut( getZoomScale() );\n\n    } else if ( delta < 0 ) {\n\n      dollyIn( getZoomScale() );\n\n    }\n\n    scope.update();\n\n  }\n\n  function handleKeyDown( event ) {\n\n    //console.log( 'handleKeyDown' );\n\n    switch ( event.keyCode ) {\n\n      case scope.keys.UP:\n        pan( 0, scope.keyPanSpeed );\n        scope.update();\n        break;\n\n      case scope.keys.BOTTOM:\n        pan( 0, - scope.keyPanSpeed );\n        scope.update();\n        break;\n\n      case scope.keys.LEFT:\n        pan( scope.keyPanSpeed, 0 );\n        scope.update();\n        break;\n\n      case scope.keys.RIGHT:\n        pan( - scope.keyPanSpeed, 0 );\n        scope.update();\n        break;\n\n    }\n\n  }\n\n  function handleTouchStartRotate( event ) {\n\n    //console.log( 'handleTouchStartRotate' );\n\n    rotateStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n  }\n\n  function handleTouchStartDolly( event ) {\n\n    //console.log( 'handleTouchStartDolly' );\n\n    var dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n    var dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\n    var distance = Math.sqrt( dx * dx + dy * dy );\n\n    dollyStart.set( 0, distance );\n\n  }\n\n  function handleTouchStartPan( event ) {\n\n    //console.log( 'handleTouchStartPan' );\n\n    panStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n  }\n\n  function handleTouchMoveRotate( event ) {\n\n    //console.log( 'handleTouchMoveRotate' );\n\n    rotateEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n    rotateDelta.subVectors( rotateEnd, rotateStart );\n\n    var element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n    // rotating across whole screen goes 360 degrees around\n    rotateLeft( 2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed );\n\n    // rotating up and down along whole screen attempts to go 360, but limited to 180\n    rotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed );\n\n    rotateStart.copy( rotateEnd );\n\n    scope.update();\n\n  }\n\n  function handleTouchMoveDolly( event ) {\n\n    //console.log( 'handleTouchMoveDolly' );\n\n    var dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n    var dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\n    var distance = Math.sqrt( dx * dx + dy * dy );\n\n    dollyEnd.set( 0, distance );\n\n    dollyDelta.subVectors( dollyEnd, dollyStart );\n\n    if ( dollyDelta.y > 0 ) {\n\n      dollyOut( getZoomScale() );\n\n    } else if ( dollyDelta.y < 0 ) {\n\n      dollyIn( getZoomScale() );\n\n    }\n\n    dollyStart.copy( dollyEnd );\n\n    scope.update();\n\n  }\n\n  function handleTouchMovePan( event ) {\n\n    //console.log( 'handleTouchMovePan' );\n\n    panEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n    panDelta.subVectors( panEnd, panStart );\n\n    pan( panDelta.x, panDelta.y );\n\n    panStart.copy( panEnd );\n\n    scope.update();\n\n  }\n\n  function handleTouchEnd( event ) {\n\n    //console.log( 'handleTouchEnd' );\n\n  }\n\n  //\n  // event handlers - FSM: listen for events and reset state\n  //\n\n  function onMouseDown( event ) {\n\n    if ( scope.enabled === false ) return;\n\n    event.preventDefault();\n\n    if ( event.button === scope.mouseButtons.ORBIT ) {\n\n      if ( scope.enableRotate === false ) return;\n\n      handleMouseDownRotate( event );\n\n      state = STATE.ROTATE;\n\n    } else if ( event.button === scope.mouseButtons.ZOOM ) {\n\n      if ( scope.enableZoom === false ) return;\n\n      handleMouseDownDolly( event );\n\n      state = STATE.DOLLY;\n\n    } else if ( event.button === scope.mouseButtons.PAN ) {\n\n      if ( scope.enablePan === false ) return;\n\n      handleMouseDownPan( event );\n\n      state = STATE.PAN;\n\n    }\n\n    if ( state !== STATE.NONE ) {\n\n      document.addEventListener( 'mousemove', onMouseMove, false );\n      document.addEventListener( 'mouseup', onMouseUp, false );\n      document.addEventListener( 'mouseout', onMouseUp, false );\n\n      scope.dispatchEvent( startEvent );\n\n    }\n\n  }\n\n  function onMouseMove( event ) {\n\n    if ( scope.enabled === false ) return;\n\n    event.preventDefault();\n\n    if ( state === STATE.ROTATE ) {\n\n      if ( scope.enableRotate === false ) return;\n\n      handleMouseMoveRotate( event );\n\n    } else if ( state === STATE.DOLLY ) {\n\n      if ( scope.enableZoom === false ) return;\n\n      handleMouseMoveDolly( event );\n\n    } else if ( state === STATE.PAN ) {\n\n      if ( scope.enablePan === false ) return;\n\n      handleMouseMovePan( event );\n\n    }\n\n  }\n\n  function onMouseUp( event ) {\n\n    if ( scope.enabled === false ) return;\n\n    handleMouseUp( event );\n\n    document.removeEventListener( 'mousemove', onMouseMove, false );\n    document.removeEventListener( 'mouseup', onMouseUp, false );\n    document.removeEventListener( 'mouseout', onMouseUp, false );\n\n    scope.dispatchEvent( endEvent );\n\n    state = STATE.NONE;\n\n  }\n\n  function onMouseWheel( event ) {\n\n    if ( scope.enabled === false || scope.enableZoom === false || ( state !== STATE.NONE && state !== STATE.ROTATE ) ) return;\n\n    event.preventDefault();\n    event.stopPropagation();\n\n    handleMouseWheel( event );\n\n    scope.dispatchEvent( startEvent ); // not sure why these are here...\n    scope.dispatchEvent( endEvent );\n\n  }\n\n  function onKeyDown( event ) {\n\n    if ( scope.enabled === false || scope.enableKeys === false || scope.enablePan === false ) return;\n\n    handleKeyDown( event );\n\n  }\n\n  function onTouchStart( event ) {\n\n    if ( scope.enabled === false ) return;\n\n    switch ( event.touches.length ) {\n\n      case 1: // one-fingered touch: rotate\n\n        if ( scope.enableRotate === false ) return;\n\n        handleTouchStartRotate( event );\n\n        state = STATE.TOUCH_ROTATE;\n\n        break;\n\n      case 2: // two-fingered touch: dolly\n\n        if ( scope.enableZoom === false ) return;\n\n        handleTouchStartDolly( event );\n\n        state = STATE.TOUCH_DOLLY;\n\n        break;\n\n      case 3: // three-fingered touch: pan\n\n        if ( scope.enablePan === false ) return;\n\n        handleTouchStartPan( event );\n\n        state = STATE.TOUCH_PAN;\n\n        break;\n\n      default:\n\n        state = STATE.NONE;\n\n    }\n\n    if ( state !== STATE.NONE ) {\n\n      scope.dispatchEvent( startEvent );\n\n    }\n\n  }\n\n  function onTouchMove( event ) {\n\n    if ( scope.enabled === false ) return;\n\n    event.preventDefault();\n    event.stopPropagation();\n\n    switch ( event.touches.length ) {\n\n      case 1: // one-fingered touch: rotate\n\n        if ( scope.enableRotate === false ) return;\n        if ( state !== STATE.TOUCH_ROTATE ) return; // is this needed?...\n\n        handleTouchMoveRotate( event );\n\n        break;\n\n      case 2: // two-fingered touch: dolly\n\n        if ( scope.enableZoom === false ) return;\n        if ( state !== STATE.TOUCH_DOLLY ) return; // is this needed?...\n\n        handleTouchMoveDolly( event );\n\n        break;\n\n      case 3: // three-fingered touch: pan\n\n        if ( scope.enablePan === false ) return;\n        if ( state !== STATE.TOUCH_PAN ) return; // is this needed?...\n\n        handleTouchMovePan( event );\n\n        break;\n\n      default:\n\n        state = STATE.NONE;\n\n    }\n\n  }\n\n  function onTouchEnd( event ) {\n\n    if ( scope.enabled === false ) return;\n\n    handleTouchEnd( event );\n\n    scope.dispatchEvent( endEvent );\n\n    state = STATE.NONE;\n\n  }\n\n  function onContextMenu( event ) {\n\n    event.preventDefault();\n\n  }\n\n  //\n\n  scope.domElement.addEventListener( 'contextmenu', onContextMenu, false );\n\n  scope.domElement.addEventListener( 'mousedown', onMouseDown, false );\n  scope.domElement.addEventListener( 'mousewheel', onMouseWheel, false );\n  scope.domElement.addEventListener( 'MozMousePixelScroll', onMouseWheel, false ); // firefox\n\n  scope.domElement.addEventListener( 'touchstart', onTouchStart, false );\n  scope.domElement.addEventListener( 'touchend', onTouchEnd, false );\n  scope.domElement.addEventListener( 'touchmove', onTouchMove, false );\n\n  window.addEventListener( 'keydown', onKeyDown, false );\n\n  // force an update at start\n\n  this.update();\n\n};\n\nTHREE.OrbitControls.prototype = Object.create( THREE.EventDispatcher.prototype );\nTHREE.OrbitControls.prototype.constructor = THREE.OrbitControls;\n\nObject.defineProperties( THREE.OrbitControls.prototype, {\n\n  center: {\n\n    get: function () {\n\n      console.warn( 'THREE.OrbitControls: .center has been renamed to .target' );\n      return this.target;\n\n    }\n\n  },\n\n  // backward compatibility\n\n  noZoom: {\n\n    get: function () {\n\n      console.warn( 'THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.' );\n      return ! this.enableZoom;\n\n    },\n\n    set: function ( value ) {\n\n      console.warn( 'THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.' );\n      this.enableZoom = ! value;\n\n    }\n\n  },\n\n  noRotate: {\n\n    get: function () {\n\n      console.warn( 'THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.' );\n      return ! this.enableRotate;\n\n    },\n\n    set: function ( value ) {\n\n      console.warn( 'THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.' );\n      this.enableRotate = ! value;\n\n    }\n\n  },\n\n  noPan: {\n\n    get: function () {\n\n      console.warn( 'THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.' );\n      return ! this.enablePan;\n\n    },\n\n    set: function ( value ) {\n\n      console.warn( 'THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.' );\n      this.enablePan = ! value;\n\n    }\n\n  },\n\n  noKeys: {\n\n    get: function () {\n\n      console.warn( 'THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.' );\n      return ! this.enableKeys;\n\n    },\n\n    set: function ( value ) {\n\n      console.warn( 'THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.' );\n      this.enableKeys = ! value;\n\n    }\n\n  },\n\n  staticMoving : {\n\n    get: function () {\n\n      console.warn( 'THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.' );\n      return ! this.constraint.enableDamping;\n\n    },\n\n    set: function ( value ) {\n\n      console.warn( 'THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.' );\n      this.constraint.enableDamping = ! value;\n\n    }\n\n  },\n\n  dynamicDampingFactor : {\n\n    get: function () {\n\n      console.warn( 'THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.' );\n      return this.constraint.dampingFactor;\n\n    },\n\n    set: function ( value ) {\n\n      console.warn( 'THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.' );\n      this.constraint.dampingFactor = value;\n\n    }\n\n  }\n\n} );\n"]}